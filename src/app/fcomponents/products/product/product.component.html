<div class="container">
  <!-- loading -->
  <div class="text-center mt-5 pt-5" *ngIf="isLoading">
      Loading Product...Please wait
      <div class="spinner-border text-info ml-2" role="status">
        <span class="sr-only">Loading...</span>
      </div>
  </div>
    <!-- !product path -->
  <div class="row mt-5">
    <div class="col-12" *ngIf="productDetail">
      <!-- Hire -->
      <a *ngIf="productDetail.category" (click)="backClicked(hire,productDetail.categoryId)">
        <h2 class="s2goldbold">{{productDetail.category.categoryName}}</h2>
      </a> 
      <!-- Party Services -->
      <a *ngIf="productDetail.prodTypeId == 2" (click)="backClicked('services')">
          <h2 class="s2goldbold">Party Services</h2>
      </a> 
        <!-- Party Packages -->
      <a *ngIf="productDetail.prodTypeId == 3" (click)="backClicked('packages')">
          <h2 class="s2goldbold">Party Packages</h2>
      </a> 

      <h2 class="s2goldbold"> / {{productDetail.title}}</h2>
    </div>
  </div>
  <div class="row my-5">
  <div class="col-12 col-md-6 col-lg-7 ">
    <!-- TODO: add img scrolling -->
    <div id="carouselExampleControls" class="carousel slide carousel-fade" data-ride="carousel" *ngIf="prodMediaUrl">
        <ol class="carousel-indicators">
            <li data-target="#carouselExampleControls" data-slide-to="i" class="active" *ngFor="let img of prodMediaUrl, index as i" [ngClass]="{'active': i == 0}"></li>
          </ol>
        <div class="carousel-inner">
          <div class="carousel-item h490 active" *ngFor="let img of prodMediaUrl, index as i" [ngClass]="{'active': i == 0}">
              <img src="http://luxedreameventhire.co.nz:5000/{{img.url}}" class="d-block autofix">
          </div>
        </div>
    </div>

    <br>
  </div>
  <div *ngIf="productDetail" class="col-12 col-md-6 col-lg-5 pl-lg-5">
    <h1 class="l3">{{productDetail.title}}<br/></h1>
    <div class="my-4" *ngIf="productDetail.discount && productDetail.discount>0">
      <span class="s1 mr-3">Price: ${{productDetail.price - productDetail.discount}}</span>
      <!-- <s><span class="s1">${{productDetail.price}}</span></s> -->
    </div>
    <div class="my-4" *ngIf="!productDetail.discount || productDetail.discount == 0">
        <span class="s1">${{productDetail.price}}</span>
    </div>
    <br/>
    <h3 class="s2 mb-2" style="white-space: pre-line">{{productDetail.description}}</h3>
    <br/>

    <div  *ngIf="this.productDetail['productDetail'] && this.productDetail['productDetail'].length!=0">
      <div class="s2"><b>Select specifications</b></div>
      <form [formGroup]="cartForm">
        <div  formArrayName="cartItems">
          <div style="margin-left:202px;" class="s2">Quantity</div>
          <div *ngFor="let detail of cartForm.controls.cartItems.controls, index as i">
            <div class="s2" [formGroupName]="i">
              <input  style="background-color:white; border-width: 0px; width:144px;" type="text" formControlName="Title" disabled>
              $<input style="background-color:white; border-width: 0px; width:49px;" type="text" formControlName="Price" disabled>
              <input  style="width:50px; height:22px;" type="number" min="0" formControlName="Quantity" placeholder="Quantity">
              <div *ngIf="cartForm.controls.cartItems.controls[i].controls.Quantity.invalid" class="indicator" >No more stock</div>
            </div>
          </div>
        </div>
      </form>
    </div>

    <div class="row mt-3">
      <div class="col-6 col-lg-6 s1" *ngIf="!this.productDetail['productDetail'] || this.productDetail['productDetail'].length==0">
        Quantity: <input type="number" [value] = "quantity"  min="0" max={{productDetail.availableStock}} [(ngModel)]="quantity">
        <!-- <span class="s3 pl-2"> (only {{productDetail.availableStock}} in stock)</span> -->
      </div>
      <div class="col-6 col-lg-6">
        <button class='btn btn_gold' (click)="manageCartProds()" [disabled] = " 0>= quantity && (cartForm.invalid || isInputZero)">Add to cart</button>
      </div>
    </div>

    <div class="row justify-content-end">
      <!-- <div class="col-6 col-lg-4 alert alert-danger mt-3" role="alert" *ngIf="!isStockAvailable" >No more stock</div> -->
      <div class="col-6 col-lg-4 alert alert-success mt-3" role="alert" *ngIf="isprodAdded && isStockAvailable">
          Added into cart.
      </div>
    </div>

   </div>
 </div>
</div>